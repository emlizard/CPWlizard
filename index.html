<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CPW &amp; CPWG Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
<link rel="stylesheet" href="style.css"></head>
<body data-theme="light">
  <header class="header">
    <div class="header-content">
      <div class="logo-section">
        <a href="https://emlizard.github.io/main-page/" class="back-btn">
          <i class="fas fa-arrow-left"></i>
          Back to Calculators
        </a>
        <div class="page-title">CPW &amp; CPWG Calculator</div>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
    </div>
  </header>

  <div class="container">
    <!-- Hero Section -->
    <div class="hero">
      <h1>CPW &amp; CPWG Calculator</h1>
      <p>Accurate calculation of characteristic impedance and effective permittivity for Coplanar Waveguide (CPW) and Coplanar Waveguide with Ground (CPWG) transmission lines.</p>
      <div class="reference-note">
        Advanced formulas reflecting the physical differences between CPW and CPWG structures
      </div>
    </div>

    <!-- Main Calculator Grid -->
    <div class="grid grid-3">
      <!-- Input Parameters -->
      <div class="card animate-in">
        <div class="card-title">
          <div class="card-icon">
            <i class="fas fa-sliders-h"></i>
          </div>
          Input Parameters
        </div>
        
        <div style="margin-bottom: 2rem;">
          <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1rem;">Common Parameters</h4>
          
          <div class="input-group">
            <label class="input-label" for="signal-width">
              Signal Line Width (W) <span class="input-unit">[mm]</span>
            </label>
            <input type="number" id="signal-width" class="input-field" step="any" value="2.0" min="0">
          </div>
          
          <div class="input-group">
            <label class="input-label" for="substrate-thickness">
              Substrate Thickness (h) <span class="input-unit">[mm]</span>
            </label>
            <input type="number" id="substrate-thickness" class="input-field" step="any" value="1.6" min="0">
          </div>
          
          <div class="input-group">
            <label class="input-label" for="conductor-thickness">
              Conductor Thickness (t) <span class="input-unit">[µm]</span>
            </label>
            <input type="number" id="conductor-thickness" class="input-field" step="any" value="35" min="0">
          </div>
          
          <div class="input-group">
            <label class="input-label" for="permittivity">
              Relative Permittivity (εᵣ)
            </label>
            <input type="number" id="permittivity" class="input-field" step="any" value="4.4" min="1">
          </div>
          
          <div class="input-group">
            <label class="input-label" for="frequency">
              Frequency (f) <span class="input-unit">[GHz]</span>
            </label>
            <input type="number" id="frequency" class="input-field" step="any" value="1.0" min="0">
          </div>
        </div>

        <!-- Calculation Methods -->
        <div class="calc-section">
          <h3>
            <i class="fas fa-arrow-right"></i>
            Slot Width → Impedance
          </h3>
          
          <div class="input-group">
            <label class="input-label" for="slot-width">
              Slot Width (S) <span class="input-unit">[mm]</span>
            </label>
            <input type="number" id="slot-width" class="input-field" step="any" value="0.5" min="0">
          </div>
          
          <button type="button" class="btn btn-full" onclick="calculateImpedance()">
            <i class="fas fa-calculator"></i>
            Calculate Z₀
          </button>
        </div>

        <div class="calc-section">
          <h3>
            <i class="fas fa-arrow-left"></i>
            Impedance → Slot Width
          </h3>
          
          <div class="input-group">
            <label class="input-label" for="target-impedance">
              Target Impedance (Z₀) <span class="input-unit">[Ω]</span>
            </label>
            <input type="number" id="target-impedance" class="input-field" step="any" value="50" min="0">
          </div>
          
          <button type="button" class="btn btn-secondary btn-full" onclick="calculateSlotWidth()">
            <i class="fas fa-search"></i>
            Find Slot Width
          </button>
        </div>
      </div>

      <!-- CPW Results -->
      <div class="card animate-in">
        <div class="card-title">
          <div class="card-icon">
            <i class="fas fa-wave-square"></i>
          </div>
          CPW Structure
        </div>
        
        <div class="diagram-container">
          <div class="diagram-title">Coplanar Waveguide</div>
          <div class="diagram diagram-cpw">
            <img src="https://emlizard.github.io/main-page/images/diagram_CPW.png" style="width: 300px; height: auto;" alt="CPW Diagram">
            <div style="margin-top: 2rem;">
              Signal line and ground planes<br>on the same layer
            </div>
          </div>
        </div>
        
        <div class="result-display">
          <div class="result-title">
            <i class="fas fa-chart-line"></i>
            CPW Results
          </div>
          
          <div class="result-grid">
            <div class="result-item">
              <div class="result-label">Characteristic Impedance</div>
              <div class="result-value" id="cpw-impedance">-- Ω</div>
            </div>
            
            <div class="result-item">
              <div class="result-label">Slot Width</div>
              <div class="result-value" id="cpw-slot">-- mm</div>
            </div>
            
            <div class="result-item">
              <div class="result-label">Effective Permittivity</div>
              <div class="result-value" id="cpw-permittivity">--</div>
            </div>
          </div>
          
          <div class="debug-toggle">
            <input type="checkbox" id="cpw-debug-toggle" onchange="toggleDebug('cpw')">
            <label for="cpw-debug-toggle">Show debug information</label>
          </div>
          
          <div class="debug-section" id="cpw-debug">
            Debug information will appear here when enabled.
          </div>
        </div>
      </div>

      <!-- CPWG Results -->
      <div class="card animate-in">
        <div class="card-title">
          <div class="card-icon">
            <i class="fas fa-layer-group"></i>
          </div>
          CPWG Structure
        </div>
        
        <div class="diagram-container">
          <div class="diagram-title">CPW with Ground Plane</div>
          <div class="diagram diagram-cpwg">
            <img src="https://emlizard.github.io/main-page/images/diagram_CPWG.png" style="width: 300px; height: auto;" alt="CPWG Diagram">
            <div style="margin-top: 2rem;">
              CPW + bottom ground plane
            </div>
          </div>
        </div>
        
        <div class="result-display">
          <div class="result-title">
            <i class="fas fa-chart-line"></i>
            CPWG Results
          </div>
          
          <div class="result-grid">
            <div class="result-item">
              <div class="result-label">Characteristic Impedance</div>
              <div class="result-value" id="cpwg-impedance">-- Ω</div>
            </div>
            
            <div class="result-item">
              <div class="result-label">Slot Width</div>
              <div class="result-value" id="cpwg-slot">-- mm</div>
            </div>
            
            <div class="result-item">
              <div class="result-label">Effective Permittivity</div>
              <div class="result-value" id="cpwg-permittivity">--</div>
            </div>
          </div>
          
          <div class="debug-toggle">
            <input type="checkbox" id="cpwg-debug-toggle" onchange="toggleDebug('cpwg')">
            <label for="cpwg-debug-toggle">Show debug information</label>
          </div>
          
          <div class="debug-section" id="cpwg-debug">
            Debug information will appear here when enabled.
          </div>
        </div>
      </div>
    </div>

    <!-- Physical Theory -->
    <div class="card animate-in">
      <div class="card-title">
        <div class="card-icon">
          <i class="fas fa-atom"></i>
        </div>
        Physical Differences: CPW vs CPWG
      </div>
      
      <div class="info-box">
        <h4>Electromagnetic Field Distribution</h4>
        <p>
          <strong>CPW:</strong> Fields are distributed approximately 50/50 between air and dielectric substrate. The structure resembles a "slot line" with electromagnetic coupling through both media.<br><br>
          <strong>CPWG:</strong> The bottom ground plane confines more electromagnetic fields within the dielectric substrate, resulting in higher field concentration and increased effective permittivity.
        </p>
      </div>

      <div class="info-box">
        <h4>Mathematical Model Differences</h4>
        <p>
          <strong>Substrate Correction Factor (k₁):</strong><br>
          • CPW uses <em>sinh()</em> functions modeling infinite substrate boundaries<br>
          • CPWG uses <em>tanh()</em> functions accounting for the finite substrate with bottom ground<br><br>
          <strong>Effective Permittivity Formula:</strong><br>
          • CPW: Averaging approach → (εᵣ + 1)/2 + correction<br>
          • CPWG: Field filling approach → 1 + (εᵣ - 1) × filling_factor
        </p>
      </div>

      <div class="info-box">
        <h4>Practical Implications</h4>
        <p>
          For the same geometry, CPWG will typically have:<br>
          • Higher effective permittivity (εₑff) due to field confinement<br>
          • Lower characteristic impedance (Z₀)<br>
          • Better field confinement within the substrate<br>
          • Reduced radiation losses<br>
          • More predictable performance across frequency
        </p>
      </div>
    </div>

    <!-- Mathematical Formulas -->
    <div class="card animate-in">
      <div class="card-title">
        <div class="card-icon">
          <i class="fas fa-square-root-alt"></i>
        </div>
        Mathematical Formulas
      </div>
      
      <div class="formula-section">
        <h3>1. Common Parameters</h3>
        <div class="formula-content">
          <p><strong>Effective Conductor Width (thickness correction):</strong></p>
          \[
          W_{\text{eff}} = W + \frac{t}{\pi} \left[ 1 + \ln\left(\frac{4\pi W}{t}\right) \right]
          \]
          
          <p><strong>Conductor Width Ratio:</strong></p>
          \[
          k = \frac{W_{\text{eff}}}{W_{\text{eff}} + 2S}
          \]
        </div>
      </div>

      <div class="formula-section">
        <h3>2. CPW Formulas</h3>
        <div class="formula-content">
          <p><strong>Substrate Thickness Correction (infinite boundaries):</strong></p>
          \[
          k_1^{\text{CPW}} = \frac{\sinh\left(\frac{\pi W_{\text{eff}}}{4h}\right)}{\sinh\left(\frac{\pi (W_{\text{eff}} + 2S)}{4h}\right)}
          \]
          
          <p><strong>Static Effective Permittivity:</strong></p>
          \[
          \varepsilon_{\text{eff,0}}^{\text{CPW}} = \frac{\varepsilon_r + 1}{2} + \frac{\varepsilon_r - 1}{2} \cdot \frac{K(k_1^{\text{CPW}})}{K'(k_1^{\text{CPW}})}
          \]
          
          <p><strong>Characteristic Impedance:</strong></p>
          \[
          Z_0^{\text{CPW}} = \frac{30\pi}{\sqrt{\varepsilon_{\text{eff}}^{\text{CPW}}}} \cdot \frac{K'(k)}{K(k)}
          \]
        </div>
      </div>

      <div class="formula-section">
        <h3>3. CPWG Formulas</h3>
        <div class="formula-content">
          <p><strong>Substrate Thickness Correction (finite substrate with bottom ground):</strong></p>
          \[
          k_1^{\text{CPWG}} = \frac{\tanh\left(\frac{\pi W_{\text{eff}}}{4h}\right)}{\tanh\left(\frac{\pi (W_{\text{eff}} + 2S)}{4h}\right)}
          \]
          
          <p><strong>Static Effective Permittivity (Wadell standard formula):</strong></p>
          \[
          \varepsilon_{\text{eff,0}}^{\text{CPWG}} = \frac{\varepsilon_r + 1}{2} \cdot \frac{K(k_1^{\text{CPWG}})}{K'(k_1^{\text{CPWG}})} + \frac{\varepsilon_r - 1}{2} \cdot \frac{K(k)}{K'(k)}
          \]
          
          <p><strong>Characteristic Impedance:</strong></p>
          \[
          Z_0^{\text{CPWG}} = \frac{30\pi}{\sqrt{\varepsilon_{\text{eff}}^{\text{CPWG}}}} \cdot \frac{K'(k)}{K(k)}
          \]
        </div>
      </div>

      <div class="formula-section">
        <h3>4. Frequency Dispersion</h3>
        <div class="formula-content">
          <p><strong>Characteristic Frequency:</strong></p>
          \[
          f_p = \frac{c}{4h\sqrt{\varepsilon_r}}
          \]
          
          <p><strong>Frequency-Dependent Effective Permittivity:</strong></p>
          \[
          \varepsilon_{\text{eff}}(f) = \varepsilon_{\text{eff,0}} + (\varepsilon_r - \varepsilon_{\text{eff,0}}) \left(1 - e^{-\alpha f/f_p} \right)
          \]
          <p>where α = 1.0 for CPW, α = 1.2 for CPWG (enhanced dispersion)</p>
          
          <p><strong>Complete Elliptic Integral Ratio (Hilberg approximation):</strong></p>
          \[
          \frac{K(k)}{K'(k)} = \begin{cases}
          \frac{1}{\pi} \ln\left(2 \frac{1+\sqrt{k}}{1-\sqrt{k}}\right) &amp; \text{if } k \leq \frac{1}{\sqrt{2}} \\[0.5em]
          \frac{\pi}{\ln\left(2 \frac{1+\sqrt{k'}}{1-\sqrt{k'}}\right)} &amp; \text{if } k &gt; \frac{1}{\sqrt{2}}
          \end{cases}
          \]
          <p>where \( k' = \sqrt{1-k^2} \) is the complementary modulus</p>
        </div>
      </div>
    </div>
  </div>

  

<script src="script.js"></script></body></html>
